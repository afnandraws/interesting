(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{1413:function(e,t,n){Promise.resolve().then(n.bind(n,2598))},7272:function(e,t,n){"use strict";n.d(t,{Dw:function(){return d},Ib:function(){return i},TJ:function(){return c},e5:function(){return r}});var s=n(64);let o={isAuth:!1,username:"",uid:"",savedPosts:[]};console.log(o);let a=(0,s.oM)({name:"auth",initialState:o,reducers:{initialCheck:(e,t)=>{let n=t.payload;if(console.log(n.savedPosts),n.username&&n.uid)return{isAuth:!0,username:n.username,uid:n.uid,savedPosts:n.savedPosts}},logOut:()=>o,logIn:(e,t)=>{let n=t.payload;return console.log(n),{isAuth:!0,username:n.username,uid:n.uid,savedPosts:n.savedPosts}},savePost:(e,t)=>{var n;let s=t.payload,o=[...e.savedPosts,s],a=o.toLocaleString();return console.log(s),null===(n=localStorage)||void 0===n||n.setItem("savedPosts",a),{isAuth:e.isAuth,username:e.username,uid:e.uid,savedPosts:o}},unsavePost:(e,t)=>{var n;let s=t.payload,o=e.savedPosts.filter(e=>e!==s),a=o.toLocaleString();return console.log(s),null===(n=localStorage)||void 0===n||n.setItem("savedPosts",a),{isAuth:e.isAuth,username:e.username,uid:e.uid,savedPosts:o}}}}),{initialCheck:r,logIn:i,logOut:l,savePost:c,unsavePost:d}=a.actions;t.ZP=a.reducer},3956:function(e,t,n){"use strict";n.d(t,{C:function(){return i},h:function(){return r}});var s=n(64),o=n(7272),a=n(3198);let r=(0,s.xC)({reducer:{authReducer:o.ZP}}),i=a.v9},2598:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var s=n(7437),o=n(1192),a=n.n(o),r=n(1288),i=n(2265),l=n(3195),c=n.n(l),d=n(3956),u=n(6691),h=n.n(u),g={src:"/_next/static/media/savedIcon.00f366dd.svg",height:800,width:800,blurWidth:0,blurHeight:0},p={src:"/_next/static/media/saveIcon.2f6f0ab2.svg",height:800,width:800,blurWidth:0,blurHeight:0},v={src:"/_next/static/media/previousArrow.bd9905e4.svg",height:800,width:800,blurWidth:0,blurHeight:0},m=n(3198),f=n(7272);let x=[];var b=()=>{let[e,t]=(0,i.useState)(0),[n,o]=(0,i.useState)([{}]),[a,r]=(0,i.useState)(0),[l,u]=(0,i.useState)(!1),[b,j]=(0,i.useState)(!1),[_,y]=(0,i.useState)(!1),w=(0,m.I0)(),S=(0,d.C)(e=>e.authReducer.savedPosts),P=(0,d.C)(e=>e.authReducer.username),k=(0,d.C)(e=>e.authReducer.isAuth),C=(0,d.C)(e=>e.authReducer.uid),I=(0,s.jsx)("button",{onClick:N,children:(0,s.jsx)(h(),{alt:"save",src:p,height:60})}),A=(0,s.jsx)("button",{style:{backgroundColor:"#FA3701",transform:"translate(8px, -8px)",animation:"none",boxShadow:"0px 0px 0px #FA3701"},onClick:N,children:(0,s.jsx)(h(),{alt:"save",src:g,height:60})});function N(e){switch(e.preventDefault(),console.log(b),b){case!0:console.log(1);let t=async()=>{let e=await fetch("https://interesting-app-backend.onrender.com/users/unsavepost",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:C,postID:n[a].id})}),t=await e.json();console.log(t)};j(!1),t(),w((0,f.Dw)(n[a].id));break;case!1:console.log(2);let s=async()=>{await fetch("https://interesting-app-backend.onrender.com/users/savepost",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({id:C,postID:n[a].id})}).then(e=>{if(e.ok)return e.json()}).catch(e=>{console.log(e)})};j(!1),s(),w((0,f.TJ)(n[a].id))}}let O=async e=>{if("Enter"===e.key){let t=await fetch("https://interesting-app-backend.onrender.com/facts/add",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({fact:e.target.value,createdBy:P})}).catch(e=>{console.log(e.message)}),n=await t.json();console.log(n),u(!1)}};function F(t){switch(u(!1),t.target.id){case"previous":a-1<0||r(a-1);break;case"next":console.log(a),n[a+1]?r(a+1):(console.log("worked"),console.log(a+1),console.log(e),e>a+1&&(y(!0),T()))}}(0,i.useEffect)(()=>{var e;(null==S?void 0:S.includes(null===(e=n[a])||void 0===e?void 0:e.id))?j(!0):j(!1),console.log(b)},[n,S,b,a]);let T=async()=>{let e=await fetch("https://interesting-app-backend.onrender.com/facts").catch(e=>{console.log(e.message)}),t=await e.json();for(let e in console.log(t),t)x.find(n=>n.id===t[e]._id)||x.push({id:t[e]._id,fact:t[e].fact,createdBy:void 0===t[e].createdBy?"anonymous":t[e].createdBy});o(x),y(!1)},H=async()=>{let e=await fetch("https://interesting-app-backend.onrender.com/facts/getcount").catch(e=>{console.log(e.message)}),n=await e.json();t(n)};return(0,i.useEffect)(()=>{T(),H()},[]),(0,s.jsxs)("div",{className:c().container,children:[(0,s.jsxs)("h1",{children:["Hi ",P||"stranger",", today's ",(0,s.jsx)("br",{}),"interesting fact is..."]}),(0,s.jsxs)("div",{className:c().bottombar,children:[P?b?A:I:"",(0,s.jsxs)("div",{children:[!_&&!l&&(0,s.jsxs)("div",{className:c().fact,children:[(0,s.jsx)("span",{children:n[a].fact}),(0,s.jsx)("span",{children:n[a].createdBy===P?"Me!!":n[a].createdBy})]}),_&&(0,s.jsx)("div",{className:c().fact,children:(0,s.jsx)("span",{children:"loading..."})}),l&&(0,s.jsxs)("div",{className:c().fact,children:[(0,s.jsx)("input",{onKeyDown:O,placeholder:"Type in your new interesting fact to share with the world!"}),(0,s.jsx)("span",{children:P})]}),k&&(0,s.jsxs)("div",{className:c().cta,children:["Would you like to submit a new interesting fact? ",(0,s.jsx)("span",{onClick:()=>{u(!l)},children:"Click here!"})]})]}),(0,s.jsx)("button",{onClick:F,id:"previous",children:(0,s.jsx)(h(),{alt:"previous",src:v,height:90})}),(0,s.jsx)("button",{onClick:F,id:"next",children:(0,s.jsx)(h(),{style:{transform:"rotate(180deg)"},alt:"next",src:v,height:90})})]})]})};function j(){return(0,s.jsxs)("main",{className:a().main,children:[(0,s.jsx)(r.Z,{}),(0,s.jsx)(b,{})]})}},1288:function(e,t,n){"use strict";n.d(t,{Z:function(){return f}});var s=n(7437),o=n(3757),a=n.n(o),r={src:"/_next/static/media/loggedInProfile.7875de3a.svg",height:800,width:800,blurWidth:0,blurHeight:0},i={src:"/_next/static/media/signInProfile.3a64f7e7.svg",height:800,width:800,blurWidth:0,blurHeight:0},l=n(2265),c=n(6191),d=n.n(c),u=n(3198),h=n(7272),g=e=>{let t=(0,u.I0)(),[n,o]=(0,l.useState)(""),[a,r]=(0,l.useState)(""),[i,c]=(0,l.useState)(""),[g,p]=(0,l.useState)(!0),[v,m]=(0,l.useState)(!1),[f,x]=(0,l.useState)(!1),[b,j]=(0,l.useState)(!1),_=async()=>{await fetch("https://interesting-app-backend.onrender.com/users/add",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:n,password:a})}).then(e=>{if(console.log(e),e.ok)return e.json();if(404===e.status){j(!0),x(!1);return}x(!1)}).then(t=>{var n,s;console.log(t),null===(n=localStorage)||void 0===n||n.setItem("id",t._id),null===(s=localStorage)||void 0===s||s.setItem("username",t.username),e.openHandler(),x(!1),y()}).catch(e=>{console.log(e.message)})},y=async()=>{await fetch("https://interesting-app-backend.onrender.com/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:n,password:a})}).then(e=>{if(console.log(e),e.ok)return e.json();if(404===e.status){j(!0),x(!1);return}x(!1)}).then(n=>{var s,o,a;if(console.log(n),null==n){j(!0),x(!1);return}null===(s=localStorage)||void 0===s||s.setItem("id",n._id),null===(o=localStorage)||void 0===o||o.setItem("username",n.username),null===(a=localStorage)||void 0===a||a.setItem("savedPosts",n.savedPosts),t((0,h.Ib)({username:n.username,uid:n._id,savedPosts:n.savedPosts})),e.openHandler(),x(!1)}).catch(e=>{console.log(e.message)})};return(0,s.jsxs)("div",{className:d().container,children:[(0,s.jsxs)("div",{className:d().firstrow,children:[(0,s.jsx)("input",{tabIndex:"0",value:n,onChange:e=>{o(e.target.value)},type:"text",placeholder:"Enter Username",required:!0}),(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),g?(x(!0),j(!1),y()):(p(!0),m(void 0))},style:{backgroundColor:g&&"#FA3701",color:g&&"#FCF6EA"},children:g?"Login":"Have an account?"}),(0,s.jsx)("button",{onClick:e=>{e.preventDefault(),v?(x(!0),j(!1),_()):(m(!0),p(!1))},style:{backgroundColor:v&&"#FA3701",color:v&&"#FCF6EA"},children:v?"Sign-Up":"Or need an account?"})]}),(0,s.jsxs)("div",{className:d().secondrow,children:[(0,s.jsx)("input",{tabIndex:"0",value:a,onChange:e=>{r(e.target.value)},type:"password",placeholder:"Enter Password",required:!0}),v&&!g&&(0,s.jsx)("input",{value:i,onChange:e=>{c(e.target.value)},type:"password",placeholder:"Re-enter Password",required:!0})]})]})},p=n(3956),v=n(6691),m=n.n(v),f=()=>{let e;let[t,n]=(0,l.useState)(!1),o=(0,p.C)(e=>e.authReducer.isAuth),c=(0,u.I0)();return console.log(e=window.location.href),(0,l.useEffect)(()=>{var e,t,n;let s=null===(e=localStorage)||void 0===e?void 0:e.getItem("savedPosts"),o=null==s?void 0:s.split(",").filter(e=>null!=e&&""!==e);c((0,h.e5)({username:null===(t=localStorage)||void 0===t?void 0:t.getItem("username"),uid:null===(n=localStorage)||void 0===n?void 0:n.getItem("id"),savedPosts:o}))},[]),(0,s.jsx)(s.Fragment,{children:(0,s.jsxs)("header",{className:a().header,children:[(0,s.jsx)("button",{style:{backgroundColor:o?"#FA3701":""},onClick:e=>{e.currentTarget.focus(),n(!t)},onBlur:e=>{e.currentTarget.blur()},children:o?(0,s.jsx)(m(),{alt:"logged in",src:r,height:90}):(0,s.jsx)(m(),{alt:"sign in",src:i,height:90})}),t&&o&&(0,s.jsxs)("div",{className:a().buttongroup,children:[(0,s.jsx)("button",{children:(0,s.jsx)("a",{href:(null==e?void 0:e.includes("saved"))?"/":"/saved",children:(null==e?void 0:e.includes("saved"))?"Home":"Saved Posts"})}),(0,s.jsx)("button",{onClick:()=>{var e,t;null===(e=localStorage)||void 0===e||e.removeItem("id"),null===(t=localStorage)||void 0===t||t.removeItem("username"),location.reload()},children:"Log Out"})]}),t&&!o&&(0,s.jsx)(g,{openHandler:()=>{n(!t)}})]})})}},1192:function(e){e.exports={main:"page_main__GlU4n"}},3195:function(e){e.exports={container:"Facts_container__TOI7i",bottombar:"Facts_bottombar__BG2pJ",fact:"Facts_fact__z8Xj0","diagonal-motion":"Facts_diagonal-motion__46tdn","diagonal-motion-blur":"Facts_diagonal-motion-blur__bhOEB",cta:"Facts_cta__OxEwu"}},3757:function(e){e.exports={header:"Header_header__MvnS2","diagonal-motion":"Header_diagonal-motion___wzhE","diagonal-motion-blur":"Header_diagonal-motion-blur__YgYR1",buttongroup:"Header_buttongroup__L4P09"}},6191:function(e){e.exports={container:"ProfilePanel_container__vYuzq",firstrow:"ProfilePanel_firstrow__RxS2o",secondrow:"ProfilePanel_secondrow__ObuI4"}}},function(e){e.O(0,[713,691,971,596,744],function(){return e(e.s=1413)}),_N_E=e.O()}]);