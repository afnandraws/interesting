(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[265],{3866:function(e,t,n){Promise.resolve().then(n.bind(n,2876))},7272:function(e,t,n){"use strict";n.d(t,{Dw:function(){return c},Ib:function(){return i},TJ:function(){return u},e5:function(){return r}});var o=n(64);let s={isAuth:!1,username:"",uid:"",savedPosts:[]};console.log(s);let a=(0,o.oM)({name:"auth",initialState:s,reducers:{initialCheck:(e,t)=>{let n=t.payload;if(console.log(n.savedPosts),n.username&&n.uid)return{isAuth:!0,username:n.username,uid:n.uid,savedPosts:n.savedPosts}},logOut:()=>s,logIn:(e,t)=>{let n=t.payload;return console.log(n),{isAuth:!0,username:n.username,uid:n.uid,savedPosts:n.savedPosts}},savePost:(e,t)=>{var n;let o=t.payload,s=[...e.savedPosts,o],a=s.toLocaleString();return console.log(o),null===(n=localStorage)||void 0===n||n.setItem("savedPosts",a),{isAuth:e.isAuth,username:e.username,uid:e.uid,savedPosts:s}},unsavePost:(e,t)=>{var n;let o=t.payload,s=e.savedPosts.filter(e=>e!==o),a=s.toLocaleString();return console.log(o),null===(n=localStorage)||void 0===n||n.setItem("savedPosts",a),{isAuth:e.isAuth,username:e.username,uid:e.uid,savedPosts:s}}}}),{initialCheck:r,logIn:i,logOut:l,savePost:u,unsavePost:c}=a.actions;t.ZP=a.reducer},3956:function(e,t,n){"use strict";n.d(t,{C:function(){return i},h:function(){return r}});var o=n(64),s=n(7272),a=n(3198);let r=(0,o.xC)({reducer:{authReducer:s.ZP}}),i=a.v9},2876:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return b}});var o=n(7437),s=n(7310),a=n.n(s),r=n(1288),i=n(2637),l=n.n(i),u=n(4033),c=n(3956),d=n(2265),h=n(6691),g=n.n(h),v=n(8247),m=n.n(v),f={src:"/_next/static/media/copyIcon.40fad168.svg",height:800,width:800,blurWidth:0,blurHeight:0},p=e=>{let{fact:t,createdBy:n,username:s}=e;return(0,o.jsxs)("div",{className:m().bottombar,children:[(0,o.jsx)("div",{children:(0,o.jsxs)("div",{className:m().fact,children:[(0,o.jsx)("span",{children:t}),(0,o.jsx)("span",{children:n===s?"Me!!":n})]})}),(0,o.jsx)("button",{onClick:()=>{navigator.clipboard.writeText(t)},children:(0,o.jsx)(g(),{alt:"save",src:f,height:60})})]})};let _=[];var x=()=>{let[e,t]=(0,d.useState)([]),n=(0,c.C)(e=>e.authReducer.username),s=(0,c.C)(e=>e.authReducer.savedPosts),{push:a}=(0,u.useRouter)();(0,d.useEffect)(()=>{if(n){let e=async e=>{await fetch("https://interesting-app-backend.onrender.com/facts/favourites",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({facts:e})}).then(e=>{if(e.ok)return e.json()}).then(e=>{for(let n in console.log(e),e)_.push({id:e[n]._id,fact:e[n].fact,createdBy:void 0===e[n].createdBy?"anonymous":e[n].createdBy}),t(_)})};e(s).catch(e=>{console.log(e.message)})}else a("/")});let r=e.map(e=>(0,o.jsx)(p,{fact:e.fact,createdBy:e.createdBy,username:n},e.id));return(0,o.jsxs)("div",{className:l().container,children:[(0,o.jsxs)("h1",{children:["Hi ",n,"! Here are ",(0,o.jsx)("br",{}),"your saved Facts:"]}),(0,o.jsx)("div",{children:r})]})};function b(){return(0,o.jsx)("div",{className:a().container,children:(0,o.jsxs)("main",{className:a().main,children:[(0,o.jsx)(r.Z,{}),(0,o.jsx)(x,{})]})})}},1288:function(e,t,n){"use strict";n.d(t,{Z:function(){return p}});var o=n(7437),s=n(3757),a=n.n(s),r={src:"/_next/static/media/loggedInProfile.7875de3a.svg",height:800,width:800,blurWidth:0,blurHeight:0},i={src:"/_next/static/media/signInProfile.3a64f7e7.svg",height:800,width:800,blurWidth:0,blurHeight:0},l=n(2265),u=n(6191),c=n.n(u),d=n(3198),h=n(7272),g=e=>{let t=(0,d.I0)(),[n,s]=(0,l.useState)(""),[a,r]=(0,l.useState)(""),[i,u]=(0,l.useState)(""),[g,v]=(0,l.useState)(!0),[m,f]=(0,l.useState)(!1),[p,_]=(0,l.useState)(!1),[x,b]=(0,l.useState)(!1),j=async()=>{await fetch("https://interesting-app-backend.onrender.com/users/add",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:n,password:a})}).then(e=>{if(console.log(e),e.ok)return e.json();if(404===e.status){b(!0),_(!1);return}_(!1)}).then(t=>{var n,o;console.log(t),null===(n=localStorage)||void 0===n||n.setItem("id",t._id),null===(o=localStorage)||void 0===o||o.setItem("username",t.username),e.openHandler(),_(!1),P()}).catch(e=>{console.log(e.message)})},P=async()=>{await fetch("https://interesting-app-backend.onrender.com/users",{method:"POST",headers:{Accept:"application/json","Content-Type":"application/json"},body:JSON.stringify({username:n,password:a})}).then(e=>{if(console.log(e),e.ok)return e.json();if(404===e.status){b(!0),_(!1);return}_(!1)}).then(n=>{var o,s,a;if(console.log(n),null==n){b(!0),_(!1);return}null===(o=localStorage)||void 0===o||o.setItem("id",n._id),null===(s=localStorage)||void 0===s||s.setItem("username",n.username),null===(a=localStorage)||void 0===a||a.setItem("savedPosts",n.savedPosts),t((0,h.Ib)({username:n.username,uid:n._id,savedPosts:n.savedPosts})),e.openHandler(),_(!1)}).catch(e=>{console.log(e.message)})};return(0,o.jsxs)("div",{className:c().container,children:[(0,o.jsxs)("div",{className:c().firstrow,children:[(0,o.jsx)("input",{tabIndex:"0",value:n,onChange:e=>{s(e.target.value)},type:"text",placeholder:"Enter Username",required:!0}),(0,o.jsx)("button",{onClick:e=>{e.preventDefault(),g?(_(!0),b(!1),P()):(v(!0),f(void 0))},style:{backgroundColor:g&&"#FA3701",color:g&&"#FCF6EA"},children:g?"Login":"Have an account?"}),(0,o.jsx)("button",{onClick:e=>{e.preventDefault(),m?(_(!0),b(!1),j()):(f(!0),v(!1))},style:{backgroundColor:m&&"#FA3701",color:m&&"#FCF6EA"},children:m?"Sign-Up":"Or need an account?"})]}),(0,o.jsxs)("div",{className:c().secondrow,children:[(0,o.jsx)("input",{tabIndex:"0",value:a,onChange:e=>{r(e.target.value)},type:"password",placeholder:"Enter Password",required:!0}),m&&!g&&(0,o.jsx)("input",{value:i,onChange:e=>{u(e.target.value)},type:"password",placeholder:"Re-enter Password",required:!0})]})]})},v=n(3956),m=n(6691),f=n.n(m),p=()=>{let e;let[t,n]=(0,l.useState)(!1),s=(0,v.C)(e=>e.authReducer.isAuth),u=(0,d.I0)();return console.log(e=window.location.href),(0,l.useEffect)(()=>{var e,t,n;let o=null===(e=localStorage)||void 0===e?void 0:e.getItem("savedPosts"),s=null==o?void 0:o.split(",").filter(e=>null!=e&&""!==e);u((0,h.e5)({username:null===(t=localStorage)||void 0===t?void 0:t.getItem("username"),uid:null===(n=localStorage)||void 0===n?void 0:n.getItem("id"),savedPosts:s}))},[]),(0,o.jsx)(o.Fragment,{children:(0,o.jsxs)("header",{className:a().header,children:[(0,o.jsx)("button",{style:{backgroundColor:s?"#FA3701":""},onClick:e=>{e.currentTarget.focus(),n(!t)},onBlur:e=>{e.currentTarget.blur()},children:s?(0,o.jsx)(f(),{alt:"logged in",src:r,height:90}):(0,o.jsx)(f(),{alt:"sign in",src:i,height:90})}),t&&s&&(0,o.jsxs)("div",{className:a().buttongroup,children:[(0,o.jsx)("button",{children:(0,o.jsx)("a",{href:(null==e?void 0:e.includes("saved"))?"/":"/saved",children:(null==e?void 0:e.includes("saved"))?"Home":"Saved Posts"})}),(0,o.jsx)("button",{onClick:()=>{var e,t;null===(e=localStorage)||void 0===e||e.removeItem("id"),null===(t=localStorage)||void 0===t||t.removeItem("username"),location.reload()},children:"Log Out"})]}),t&&!s&&(0,o.jsx)(g,{openHandler:()=>{n(!t)}})]})})}},7310:function(e){e.exports={container:"page_container__oNRTo",main:"page_main__xy47R"}},8247:function(e){e.exports={bottombar:"Fact_bottombar__eKs5p",fact:"Fact_fact__tf825","diagonal-motion":"Fact_diagonal-motion__0lCon","diagonal-motion-blur":"Fact_diagonal-motion-blur__mQLNd"}},3757:function(e){e.exports={header:"Header_header__MvnS2","diagonal-motion":"Header_diagonal-motion___wzhE","diagonal-motion-blur":"Header_diagonal-motion-blur__YgYR1",buttongroup:"Header_buttongroup__L4P09"}},6191:function(e){e.exports={container:"ProfilePanel_container__vYuzq",firstrow:"ProfilePanel_firstrow__RxS2o",secondrow:"ProfilePanel_secondrow__ObuI4"}},2637:function(e){e.exports={container:"SavedFacts_container__5W2B9"}},4033:function(e,t,n){e.exports=n(8165)}},function(e){e.O(0,[713,691,971,596,744],function(){return e(e.s=3866)}),_N_E=e.O()}]);